<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mental Health Intake and Service Triage Assessment</title>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function () {
  emailjs.init("Q2ORYrQi3dYLLTYYg");
})();
</script>

<style>
:root{
  --bg:#f6f9fc;
  --card:#ffffff;
  --primary:#5b8bb0;
  --accent:#eef6fb;
  --text:#2e3a44;
  --muted:#6b7a88;
  --border:#e3e9ef;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Segoe UI, system-ui, sans-serif;
  background:var(--bg);
  color:var(--text);
}

.container{
  max-width:950px;
  margin:40px auto;
  background:var(--card);
  padding:40px;
  border-radius:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.06);
}

h1{
  text-align:center;
  margin-bottom:8px;
}

.subtitle{
  text-align:center;
  color:var(--muted);
  margin-bottom:36px;
}

fieldset{
  border:none;
  margin-bottom:36px;
  padding:0;
}

legend{
  font-weight:600;
  color:var(--primary);
  margin-bottom:16px;
  font-size:1.05em;
}

label{
  font-weight:500;
}

input[type=text],
input[type=date],
textarea{
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid var(--border);
  margin-top:6px;
  font-size:.95em;
}

textarea{min-height:90px}

.question{
  margin-top:16px;
}

.scale{
  display:flex;
  gap:14px;
  margin-top:8px;
}

.scale label{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:8px 10px;
  border-radius:12px;
  font-size:.8em;
  color:var(--muted);
  cursor:pointer;
}

.scale input{
  appearance:none;
  width:18px;
  height:18px;
  border-radius:50%;
  border:2px solid var(--primary);
  margin-bottom:6px;
  background:#fff;
}

.scale input:checked{
  background:radial-gradient(circle,var(--primary) 45%,transparent 47%);
}

.scale label:has(input:checked){
  background:var(--accent);
  color:var(--text);
}

.small{
  font-size:.85em;
  color:var(--muted);
  margin-bottom:10px;
}

button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:16px;
  font-size:1em;
  background:linear-gradient(135deg,var(--primary),#88b7d8);
  color:#fff;
  cursor:pointer;
  margin-top:20px;
}
</style>
</head>

<body>
<div class="container">

<h1>MENTAL HEALTH INTAKE AND SERVICE TRIAGE ASSESSMENT</h1>
<p class="subtitle">
For initial consultation use only. This is not a diagnostic tool.
</p>

<form id="mentalHealthForm">

<input type="hidden" name="full_form_submission">

<!-- SECTION 1 -->
<fieldset>
<legend>SECTION 1: BASIC INFORMATION</legend>

<label>Client Name</label>
<input name="client_name" required>

<label>Age</label>
<input name="age">

<label>Date</label>
<input type="date" name="assessment_date">

<label>Referred By</label>
<input name="referred_by">

<label>Consultation Type</label>
<input name="consultation_type" value="Free Assessment">
</fieldset>

<!-- SECTION 2 -->
<fieldset>
<legend>SECTION 2: CURRENT MENTAL STATE</legend>
<p class="small">0 = Not at all · 1 = Several days · 2 = More than half · 3 = Nearly every day</p>

<!-- 20 questions -->
<script>
const mental = [
"Feeling sad, empty, or hopeless",
"Excessive worry or anxiety",
"Difficulty concentrating or focusing",
"Feeling overwhelmed or emotionally stuck",
"Loss of interest or motivation",
"Irritability or emotional outbursts",
"Difficulty sleeping or resting",
"Fatigue or low energy",
"Negative self-talk or self-blame",
"Feeling disconnected from others",
"Somatic complaints",
"Intrusive thoughts or unwanted memories",
"Sudden or extreme mood swings",
"Feelings of guilt or worthlessness",
"Panic sensations",
"Social avoidance or withdrawal",
"Difficulty with simple decisions",
"Restlessness or physical agitation",
"Increased substance use",
"Feelings of impending doom"
];
</script>

<div id="mental"></div>
</fieldset>

<!-- SECTION 3 -->
<fieldset>
<legend>SECTION 3: FUNCTIONAL IMPACT</legend>
<p class="small">0 = No impact · 1 = Mild · 2 = Moderate · 3 = Severe</p>

<script>
const functional = [
"Work or school performance",
"Relationships",
"Self-care and daily routines",
"Decision-making",
"Emotional regulation",
"Physical health",
"Social or leisure activities",
"Financial responsibilities",
"Family dynamics",
"Overall quality of life"
];
</script>

<div id="functional"></div>
</fieldset>

<!-- SECTION 4 -->
<fieldset>
<legend>SECTION 4: COPING AND SUPPORT</legend>

<script>
const coping = [
"Healthy coping strategies",
"Emotional support from others",
"Control of emotions",
"Sought help before",
"Safe living environment",
"Access to basic needs",
"Ability to set boundaries",
"Sense of purpose"
];
</script>

<div id="coping"></div>
</fieldset>

<!-- SECTION 5 -->
<fieldset>
<legend>SECTION 5: RISK SCREENING</legend>

<script>
const risk = [
"Thoughts of harming yourself",
"Thoughts of harming others",
"Feeling unable to keep yourself safe",
"History of severe mental health diagnosis",
"History of psychiatric hospitalization",
"Recent significant trauma or loss"
];
</script>

<div id="risk"></div>
</fieldset>

<!-- NOTES -->
<fieldset>
<legend>CLINICAL NOTES</legend>

<label>Observed Mood</label>
<input name="mood">

<label>Affect</label>
<input name="affect">

<label>Communication Style</label>
<input name="communication_style">

<label>Key Stressors</label>
<textarea name="stressors"></textarea>

<label>Protective Factors</label>
<textarea name="protective_factors"></textarea>
</fieldset>

<!-- AGREEMENT -->
<fieldset>
<legend>CLIENT AGREEMENT</legend>
<p class="small">I understand this assessment is not a diagnosis.</p>

<label>Client Signature</label>
<input name="signature" required>
</fieldset>

<button type="submit">Submit Assessment</button>

</form>
</div>

<script>
function renderScale(container, questions, prefix){
  questions.forEach((q,i)=>{
    container.innerHTML += `
      <div class="question">${q}</div>
      <div class="scale">
        ${[0,1,2,3].map(v=>`
          <label>
            <input type="radio" name="${prefix}${i+1}" value="${v}">
            <span>${v}</span>
          </label>`).join("")}
      </div>`;
  });
}

renderScale(document.getElementById("mental"), mental, "m");
renderScale(document.getElementById("functional"), functional, "f");

coping.forEach((q,i)=>{
  document.getElementById("coping").innerHTML += `
    <div class="question">${q}</div>
    <div class="scale">
      <label><input type="radio" name="c${i+1}" value="0"><span>Yes</span></label>
      <label><input type="radio" name="c${i+1}" value="1"><span>No</span></label>
    </div>`;
});

risk.forEach((q,i)=>{
  document.getElementById("risk").innerHTML += `
    <div class="question">${q}</div>
    <div class="scale">
      <label><input type="radio" name="r${i+1}" value="0"><span>No</span></label>
      <label><input type="radio" name="r${i+1}" value="3"><span>Yes</span></label>
    </div>`;
});
</script>

<script>
document.getElementById("mentalHealthForm").addEventListener("submit", function(e){
  e.preventDefault();

  const fd = new FormData(this);
  let all = "";
  for (const [k,v] of fd.entries()){
    if(v) all += `${k}: ${v}\n`;
  }
  this.full_form_submission.value = all;

  emailjs.sendForm(
    "service_wp7ldkb",
    "template_1c5x1w2",
    this
  ).then(()=>{
    alert("Assessment sent successfully.");
    this.reset();
  }, err=>{
    alert("Submission failed.");
    console.error(err);
  });
});
</script>

</body>
</html>
